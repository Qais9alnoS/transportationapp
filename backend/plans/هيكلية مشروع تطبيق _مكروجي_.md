# هيكلية مشروع تطبيق "مكروجي"

يهدف هذا المستند إلى توضيح الهيكلية البرمجية المقترحة لتطبيق "مكروجي"، مع التركيز على تقسيم الملفات والمجلدات، العلاقة بين الواجهة الخلفية والأمامية، الأدوات والإطارات المستخدمة، آليات التواصل عبر الـ API، إدارة البيانات في وضع الاتصال وعدم الاتصال، وكيفية التعامل مع الخرائط والموقع الجغرافي.

## 1. تقسيم الملفات والمجلدات

سيتم تقسيم المشروع إلى جزأين رئيسيين: الواجهة الخلفية (Backend) والواجهة الأمامية (Frontend)، كل منهما في مجلد خاص به داخل المجلد الرئيسي للمشروع. هذا التقسيم يسهل عملية التطوير المستقل لكل جزء، النشر، وإدارة التبعيات.

```
makroji/
├── backend/
│   ├── src/
│   │   ├── api/
│   │   ├── config/
│   │   ├── controllers/
│   │   ├── models/
│   │   ├── routes/
│   │   ├── services/
│   │   └── utils/
│   ├── tests/
│   ├── .env
│   ├── .gitignore
│   ├── package.json (أو ما يعادله حسب اللغة)
│   └── README.md
├── frontend/
│   ├── public/
│   ├── src/
│   │   ├── assets/
│   │   ├── components/
│   │   ├── contexts/
│   │   ├── hooks/
│   │   ├── pages/
│   │   ├── services/
│   │   ├── utils/
│   │   ├── App.js (أو ما يعادله)
│   │   └── index.js (أو ما يعادله)
│   ├── tests/
│   ├── .env
│   ├── .gitignore
│   ├── package.json (أو ما يعادله حسب الإطار)
│   └── README.md
├── docs/
│   ├── project-structure.md
│   ├── backend-tasks.md
│   └── frontend-uiux-tasks.md
├── .gitignore
└── README.md
```

**شرح المجلدات الرئيسية:**

*   `makroji/`: المجلد الجذر للمشروع.
*   `backend/`: يحتوي على جميع ملفات الواجهة الخلفية.
*   `frontend/`: يحتوي على جميع ملفات الواجهة الأمامية.
*   `docs/`: يحتوي على مستندات المشروع مثل هذا الملف وملفات المهام.

**شرح مجلدات الواجهة الخلفية (`backend/`):**

*   `src/`: الكود المصدري للتطبيق.
    *   `api/`: تعريفات الـ API (مثل OpenAPI/Swagger).
    *   `config/`: ملفات الإعدادات والتهيئة.
    *   `controllers/`: منطق معالجة الطلبات الواردة من الواجهة الأمامية.
    *   `models/`: تعريفات نماذج البيانات وقواعد البيانات.
    *   `routes/`: تعريف مسارات الـ API.
    *   `services/`: منطق الأعمال (Business Logic) والتفاعل مع الخدمات الخارجية.
    *   `utils/`: وظائف مساعدة عامة.
*   `tests/`: ملفات الاختبارات للواجهة الخلفية.

**شرح مجلدات الواجهة الأمامية (`frontend/`):**

*   `public/`: الملفات الثابتة التي يتم تقديمها مباشرة (مثل `index.html`).
*   `src/`: الكود المصدري للتطبيق.
    *   `assets/`: الأصول الثابتة مثل الصور، الأيقونات، والخطوط.
    *   `components/`: المكونات البرمجية القابلة لإعادة الاستخدام (مثل الأزرار، بطاقات العرض).
    *   `contexts/`: لإدارة الحالة العامة للتطبيق (إذا كان الإطار يدعم ذلك).
    *   `hooks/`: وظائف React Hooks مخصصة (إذا كان React هو الإطار المستخدم).
    *   `pages/`: مكونات الصفحات الرئيسية للتطبيق.
    *   `services/`: منطق التفاعل مع الـ API الخلفي والخدمات الخارجية.
    *   `utils/`: وظائف مساعدة عامة.
*   `tests/`: ملفات الاختبارات للواجهة الأمامية.

## 2. العلاقة بين الباك اند والفرونت اند

يعمل الباك اند والفرونت اند ككيانين منفصلين يتواصلان عبر واجهة برمجة تطبيقات (API) مبنية على مبادئ RESTful. الواجهة الأمامية هي تطبيق العميل (Client-side application) الذي يعمل على جهاز المستخدم (الهاتف المحمول)، بينما الواجهة الخلفية هي الخادم (Server-side) الذي يستضيف منطق الأعمال، قاعدة البيانات، ويوفر البيانات للواجهة الأمامية.

*   **الواجهة الأمامية (Frontend):** مسؤولة عن عرض واجهة المستخدم، التفاعل مع المستخدم، وإرسال الطلبات إلى الواجهة الخلفية لجلب البيانات أو إرسالها. لا تحتوي على منطق أعمال معقد يتعلق بالبيانات أو الحسابات المعقدة للمسارات.
*   **الواجهة الخلفية (Backend):** مسؤولة عن تخزين وإدارة البيانات (خطوط المكاري، المحطات، الأسعار، بيانات الازدحام، تقييمات المستخدمين، بيانات لوحة التحكم الحكومية)، معالجة الطلبات من الواجهة الأمامية، تنفيذ منطق البحث عن المسارات (في وضع Online)، وتوفير الـ APIs اللازمة للواجهة الأمامية والخدمات الخارجية (مثل API تتبع المكاري أو API بيانات الازدحام).

**فصل الاهتمامات (Separation of Concerns):** هذا الفصل يضمن مرونة عالية في التطوير، حيث يمكن تطوير وتحديث كل جزء بشكل مستقل. كما يسمح بتوسيع نطاق التطبيق (Scalability) بسهولة أكبر، حيث يمكن توزيع الباك اند على عدة خوادم إذا زاد الحمل.

## 3. الأدوات والإطارات المستخدمة

لضمان الكفاءة، الأداء، وسهولة الصيانة، سيتم استخدام الأدوات والإطارات التالية:

*   **الواجهة الخلفية (Backend Framework):**
    *   **اللغة:** Python
    *   **الإطار:** FastAPI (لإنشاء APIs سريعة وفعالة، مع دعم تلقائي لـ OpenAPI/Swagger لتوثيق الـ API).
*   **الواجهة الأمامية (Frontend Framework):**
    *   **اللغة:** JavaScript/TypeScript
    *   **الإطار:** React Native (لتطوير تطبيق جوال يعمل على Android و iOS من قاعدة كود واحدة، مع دعم قوي للمكونات، إدارة الحالة، والتفاعل مع الخرائط).
*   **قاعدة البيانات (Database):**
    *   **النوع:** PostgreSQL (قاعدة بيانات علائقية قوية ومفتوحة المصدر، تدعم البيانات الجغرافية المكانية عبر PostGIS).
    *   **الاستخدام:** لتخزين بيانات خطوط المكاري، المحطات، الأسعار، المستخدمين، التقييمات، وبيانات لوحة التحكم الحكومية.
*   **قاعدة البيانات المحلية (Local Database/Storage - للواجهة الأمامية):**
    *   **النوع:** SQLite (عبر مكتبة مثل `react-native-sqlite-storage` أو `WatermelonDB`)
    *   **الاستخدام:** لتخزين البيانات الأساسية لخطوط المكاري، المحطات، والأسعار التي تسمح للتطبيق بالعمل في وضع Offline. سيتم استخدامها أيضًا لتخزين التقييمات والملاحظات مؤقتًا قبل مزامنتها مع الخادم.
*   **إدارة الحالة (State Management - للواجهة الأمامية):**
    *   Redux Toolkit أو React Context API (حسب تعقيد التطبيق).
*   **الخرائط والموقع الجغرافي (Maps & Geolocation):**
    *   **مكتبة الخرائط:** `react-native-maps` (تدعم Google Maps و Apple Maps).
    *   **خدمة تحديد الموقع:** GPS الخاص بالجهاز (للموقع الحالي)، وخدمات تحديد الموقع الجغرافي من Google Maps API (للبحث عن الأماكن، الترميز الجغرافي).
    *   **خدمة توجيه المسارات (Online):** Google Directions API أو OSRM (Open Source Routing Machine) إذا تم استضافة خادم توجيه خاص.

## 4. طبيعة API Communication

سيتم التواصل بين الواجهة الأمامية والخلفية باستخدام طلبات HTTP (GET, POST, PUT, DELETE) بتنسيق JSON. الـ API سيكون RESTful، مما يعني أن كل مورد (Resource) سيكون له نقطة نهاية (Endpoint) محددة.

**أمثلة على الـ Endpoints والبيانات المرسلة/المستقبلة:**

*   **`GET /api/v1/routes`:**
    *   **الإرسال (Request):** لا شيء (أو معلمات تصفية مثل `?last_updated=timestamp`).
    *   **الاستقبال (Response):** قائمة بجميع خطوط المكاري وبياناتها الأساسية (المسار، المحطات، الأسعار، أوقات التشغيل) بتنسيق JSON. تستخدم لتحديث قاعدة البيانات المحلية.
    ```json
    [
        {
            


            "id": "route_123",
            "name": "المزة - ساحة العباسيين",
            "description": "خط يربط المزة بساحة العباسيين",
            "path": [
                {"lat": 33.500, "lng": 36.300},
                {"lat": 33.501, "lng": 36.301}
            ],
            "stops": [
                {"id": "stop_1", "name": "موقف المزة", "lat": 33.500, "lng": 36.300},
                {"id": "stop_2", "name": "موقف ساحة العباسيين", "lat": 33.501, "lng": 36.301}
            ],
            "price": 500,
            "operating_hours": "06:00-22:00"
        }
    ]
    ```

*   **`POST /api/v1/search-route`:**
    *   **الإرسال (Request):** نقطة البداية، نقطة النهاية، ونوع التصفية (أسرع، أقل مكاري، أرخص).
    ```json
    {
        "start_lat": 33.500,
        "start_lng": 36.300,
        "end_lat": 33.505,
        "end_lng": 36.305,
        "filter_type": "fastest" 
    }
    ```
    *   **الاستقبال (Response):** قائمة بالمسارات المقترحة مع تفاصيلها (خطوط السير، التبديلات، الأوقات المقدرة، التكلفة).
    ```json
    [
        {
            "route_id": "suggested_route_1",
            "description": "طريق سريع عبر المزة",
            "segments": [
                {
                    "type": "walk",
                    "distance_meters": 200,
                    "duration_seconds": 180,
                    "instructions": "امشِ 200 متر باتجاه الشمال الشرقي إلى موقف مكرو المزة"
                },
                {
                    "type": "makro",
                    "makro_id": "route_123",
                    "start_stop_id": "stop_1",
                    "end_stop_id": "stop_2",
                    "duration_seconds": 1200,
                    "estimated_cost": 500
                }
            ],
            "total_estimated_time_seconds": 1380,
            "total_estimated_cost": 500
        }
    ]
    ```

*   **`POST /api/v1/feedback`:**
    *   **الإرسال (Request):** تفاصيل الملاحظة/الشكوى (نص، نوع، تقييم، معرف الرحلة اختياري).
    ```json
    {
        "type": "suggestion",
        "rating": 4,
        "comment": "المكرو كان نظيفًا والسائق مهذبًا.",
        "route_id": "route_123"
    }
    ```
    *   **الاستقبال (Response):** تأكيد الاستلام.

*   **`GET /api/v1/makro-locations`:**
    *   **الإرسال (Request):** لا شيء (أو معرفات مكاري محددة).
    *   **الاستقبال (Response):** قائمة بمواقع المكاري الحالية (إذا كانت متوفرة).
    ```json
    [
        {
            "makro_id": "makro_abc",
            "lat": 33.500,
            "lng": 36.300,
            "last_updated": "2025-07-01T10:30:00Z"
        }
    ]
    ```

*   **`GET /api/v1/traffic-data`:**
    *   **الإرسال (Request):** منطقة جغرافية أو مسار محدد.
    *   **الاستقبال (Response):** بيانات الازدحام المروري للمنطقة المطلوبة.

*   **`POST /api/v1/share-location`:**
    *   **الإرسال (Request):** موقع المستخدم، وقت الوصول المقدر، معرفات المستلمين.
    *   **الاستقبال (Response):** تأكيد الإرسال.

*   **`GET /api/v1/dashboard/top-routes`:**
    *   **الإرسال (Request):** لا شيء.
    *   **الاستقبال (Response):** قائمة بأكثر 10 طرق طلبًا.

*   **`GET /api/v1/dashboard/complaints`:**
    *   **الإرسال (Request):** معلمات تصفية (مثل `status`, `route_id`).
    *   **الاستقبال (Response):** قائمة بالشكاوى.

*   **`GET /api/v1/dashboard/heatmap-data`:**
    *   **الإرسال (Request):** فترة زمنية.
    *   **الاستقبال (Response):</b> بيانات الخريطة الحرارية.

## 5. ما الذي يعمل Offline، وما الذي يتطلب اتصالاً

يتم تصميم التطبيق ليكون وظيفيًا بشكل كبير في وضع عدم الاتصال (Offline-first approach)، مع تحسين التجربة عند توفر الاتصال بالإنترنت.

**يعمل Offline (بدون إنترنت):**

*   **تحديد موقع المستخدم:** يعتمد على GPS الجهاز.
*   **إدخال نقطة البداية والوجهة:** يمكن إدخالها يدويًا أو اختيارها من الوجهات المفضلة/الشائعة المخزنة محليًا.
*   **البحث عن الطريق:**
    *   `أسرع طريق`، `أقل عدد مكاري`، `أرخص طريق`.
    *   تتم الحسابات بالكامل محليًا باستخدام قاعدة البيانات المحلية لخطوط المكاري والمسارات.
*   **عرض تفاصيل الرحلة:**
    *   خطوط السير، التبديلات، الزمن التقريبي، التكلفة التقديرية.
    *   توجيهات المشي إلى المواقف.
*   **عرض الخريطة:**
    *   باستخدام بلاطات الخرائط المخزنة مسبقًا (Cached Map Tiles).
    *   إظهار مواقف المكاري والمسار على الخريطة.
*   **تنبيهات الاقتراب من المحطة:** تعتمد على GPS ومقارنة الموقع الحالي بالمحطات المخزنة محليًا.
*   **تتبع ذاتي للرحلة:** بناءً على موقع المستخدم فقط على المسار المحدد.
*   **تقييم الرحلة:** يتم تخزينه محليًا وإرساله لاحقًا عند توفر الإنترنت.
*   **الوجهات المفضلة والتاريخ السابق:** يتم تخزينها محليًا.
*   **تشغيل التطبيق بالكامل:** لا يتطلب تسجيل دخول أو إنترنت للوظائف الأساسية.
*   **دعم الأجهزة الضعيفة:** تصميم الواجهة والحسابات المحلية تساهم في أداء أفضل على الأجهزة ذات الموارد المحدودة.

**يتطلب اتصالاً (Online فقط):**

*   **تتبع مباشر للمكاري:** يتطلب بيانات GPS من المكاري عبر الخادم.
*   **جلب بيانات الازدحام المروري الحي:** يتطلب اتصالاً بـ API خارجي.
*   **`أقرب مكرو متوفر حالياً`:** يعتمد على بيانات التتبع المباشر للمكاري.
*   **إشعارات لحظية:** (مثل تغير الزمن المقدر بسبب الازدحام).
*   **مشاركة موقع المستخدم:** تتطلب اتصالاً لإرسال البيانات.
*   **إرسال التقييمات والملاحظات:** يتم إرسالها إلى الخادم.
*   **إرسال الشكاوى:** يتم إرسالها إلى الخادم.
*   **تحديث قاعدة بيانات الخطوط:** يتم جلب التحديثات من الخادم.
*   **تحميل خرائط جديدة:** يتم تحميل بلاطات الخرائط الجديدة من الإنترنت.
*   **مزامنة سجل الرحلات:** مع الحساب السحابي (إذا تم تطبيق ميزة تسجيل الدخول).
*   **عرض بيانات لوحة التحكم الحكومية:** تتطلب اتصالاً بالخادم لجلب البيانات التحليلية في الوقت الحقيقي.
*   **وضع الطقس الليلي التفاعلي:** يتطلب جلب بيانات الإنارة للمناطق من خدمة خارجية.

## 6. طبيعة البيانات المخزنة محليًا، وما الذي يتم تحديثه عند توفر اتصال

لتحقيق وظائف Offline-first، سيتم تخزين مجموعة أساسية من البيانات محليًا على جهاز المستخدم.

**البيانات المخزنة محليًا:**

*   **قاعدة بيانات خطوط المكاري:**
    *   مسارات جميع الخطوط (نقاط خطوط الطول والعرض).
    *   جميع المحطات (الاسم، خطوط الطول والعرض، معرف الخطوط التي تمر بها).
    *   أسعار كل خط.
    *   أوقات التشغيل (إن وجدت).
*   **الوجهات المفضلة للمستخدم:** يتم تخزينها محليًا.
*   **سجل البحث:** الوجهات الأخيرة والأماكن الشائعة.
*   **التقييمات والملاحظات:** يتم تخزينها مؤقتًا قبل إرسالها إلى الخادم.
*   **بلاطات الخرائط (Map Tiles):** يتم تخزينها مؤقتًا لتمكين عرض الخريطة في وضع Offline.

**البيانات التي يتم تحديثها عند توفر اتصال:**

*   **قاعدة بيانات خطوط المكاري:** يتم تحديثها بشكل دوري (مثلاً، مرة واحدة يوميًا أو عند فتح التطبيق مع توفر الإنترنت) عن طريق جلب أحدث البيانات من الخادم. يتم استخدام آلية للمقارنة بين الإصدارات لتنزيل التغييرات فقط بدلاً من القاعدة بأكملها.
*   **التقييمات والملاحظات المعلقة:** يتم إرسالها تلقائيًا إلى الخادم بمجرد استعادة الاتصال.
*   **سجل البحث والوجهات المفضلة:** يمكن مزامنتها مع حساب المستخدم السحابي (إذا تم تطبيق ميزة تسجيل الدخول) لضمان التوفر عبر الأجهزة.
*   **بلاطات الخرائط:** يتم تحديثها أو تحميل بلاطات جديدة للمناطق التي زارها المستخدم مؤخرًا أو التي تم البحث عنها.

## 7. كيفية التعامل مع الموقع الجغرافي، والخريطة، وتصفية الخطوط

**الموقع الجغرافي:**

*   **تحديد الموقع الحالي:** يتم استخدام مستشعر GPS في الجهاز لتحديد موقع المستخدم بدقة. في وضع Offline، يعتمد التطبيق كليًا على GPS الجهاز. في وضع Online، يمكن استخدام خدمات تحديد الموقع عبر الشبكة (Wi-Fi, Cellular) لتحسين الدقة والسرعة.
*   **إذن الوصول للموقع:** سيطلب التطبيق إذن الوصول إلى الموقع من المستخدم عند التشغيل الأول.

**الخريطة:**

*   **العرض:** سيتم استخدام مكتبة `react-native-maps` لعرض الخريطة. ستدعم الخريطة التكبير/التصغير، التحريك، وتدوير الخريطة.
*   **بلاطات الخرائط:** في وضع Online، سيتم جلب بلاطات الخرائط من مزود الخرائط (مثل Google Maps). في وضع Offline، سيتم الاعتماد على بلاطات الخرائط المخزنة مؤقتًا. يجب أن يكون هناك آلية لتخزين بلاطات الخرائط للمناطق الأكثر استخدامًا مسبقًا.
*   **عرض خطوط المكاري:** سيتم رسم مسارات خطوط المكاري على الخريطة كخطوط متعددة الألوان. الخطوط المختارة أو التي يمر بها المستخدم حاليًا ستكون بلون مميز.
*   **عرض المواقف:** سيتم تمثيل مواقف المكاري على الخريطة بأيقونات مميزة.
*   **تتبع المكاري (Online):** سيتم عرض مواقع المكاري الحالية على الخريطة كأيقونات متحركة، يتم تحديثها بشكل دوري من الخادم.
*   **وضع الطقس الليلي التفاعلي:** يتطلب دمج بيانات إضاءة الشوارع أو المناطق من مصدر خارجي وعرضها كطبقة على الخريطة عند تفعيل الوضع الليلي.

**تصفية الخطوط:**

*   **آلية البحث:** عند إدخال نقطة البداية والوجهة، سيقوم التطبيق (سواء محليًا في وضع Offline أو عبر الخادم في وضع Online) بالبحث عن جميع خطوط المكاري التي يمكن أن تربط بين النقطتين، مع الأخذ في الاعتبار التبديلات الممكنة.
*   **حساب المسارات:**
    *   **Offline:** يتم استخدام خوارزميات بحث المسار (مثل Dijkstra's Algorithm أو A* search) على الرسم البياني لشبكة المكاري المخزنة محليًا. يتم حساب المسافة، الزمن التقريبي (بناءً على متوسط السرعة)، والتكلفة لكل مسار.
    *   **Online:** بالإضافة إلى الحسابات المحلية، سيتم الاستفادة من بيانات الازدحام المروري الحية من API خارجي لتحسين دقة تقدير الزمن. كما يمكن استخدام خدمات توجيه المسارات المتقدمة (مثل Google Directions API) التي تأخذ في الاعتبار الظروف المرورية الحالية.
*   **أنواع التصفية:**
    *   **أسرع طريق:** يتم ترتيب النتائج بناءً على أقل زمن تقديري للرحلة (مع الأخذ في الاعتبار المشي والانتظار وزمن المكرو). في وضع Online، يتم دمج بيانات الازدحام.
    *   **أقل عدد مكاري:** يتم ترتيب النتائج بناءً على أقل عدد من التبديلات بين المكاري.
    *   **أرخص طريق:** يتم ترتيب النتائج بناءً على أقل تكلفة إجمالية للرحلة.
    *   **أقرب مكرو متوفر حالياً (Online فقط):** يتم البحث عن المكاري القريبة من موقع المستخدم والتي تسير على الخطوط المؤدية إلى الوجهة، ويتم عرض أقربها.

## 8. خدمات أو مكتبات تعتمد عليها الخريطة وتتبع الموقع

*   **`react-native-maps`:** مكتبة React Native لعرض الخرائط، تدعم Google Maps و Apple Maps. ستكون هي الواجهة الرئيسية للتفاعل مع الخريطة.
*   **Google Maps SDK for Android/iOS:** توفر الوظائف الأساسية للخرائط على الأجهزة المحمولة.
*   **Google Geocoding API:** لتحويل العناوين إلى إحداثيات جغرافية والعكس (في وضع Online).
*   **Google Places API:** للبحث عن الأماكن (الوجهات الشائعة، نقاط الاهتمام) (في وضع Online).
*   **Google Directions API (اختياري):** لتوجيه المسارات وحساب الأوقات مع الأخذ في الاعتبار الازدحام (في وضع Online). بديل مفتوح المصدر يمكن استضافته ذاتيًا هو OSRM (Open Source Routing Machine) للحسابات المعقدة للمسارات.
*   **Geolocation API (Native):** للوصول إلى مستشعر GPS الخاص بالجهاز.
*   **PostGIS:** امتداد لقاعدة بيانات PostgreSQL يوفر وظائف قوية للتعامل مع البيانات الجغرافية المكانية، وهو ضروري لتخزين وتحليل مسارات المكاري والمحطات في الباك اند.
*   **Turf.js (أو مكتبة مشابهة):** مكتبة JavaScript للتحليل الجغرافي المكاني، يمكن استخدامها في الواجهة الأمامية لإجراء بعض الحسابات البسيطة مثل المسافة بين نقطتين أو تحديد ما إذا كانت نقطة تقع ضمن مسار معين (مفيدة لتنبيهات الاقتراب من المحطة في وضع Offline).

---




## 9. اعتبارات الأمان والأداء

*   **الأمان:**
    *   **تشفير البيانات:** استخدام HTTPS لجميع الاتصالات بين الواجهة الأمامية والخلفية.
    *   **مصادقة وتفويض:** تطبيق آليات مصادقة قوية (مثل JWT) للوصول إلى الـ APIs المحمية (خاصة لوحة التحكم الحكومية).
    *   **التحقق من صحة المدخلات (Input Validation):** التأكد من صحة جميع المدخلات من الواجهة الأمامية في الباك اند لمنع الهجمات مثل SQL Injection و Cross-Site Scripting (XSS).
    *   **إدارة الأسرار (Secrets Management):** تخزين مفاتيح الـ API وبيانات الاعتماد الحساسة بشكل آمن (مثل استخدام متغيرات البيئة).
*   **الأداء:**
    *   **التحسينات على مستوى قاعدة البيانات:** استخدام الفهارس (Indexes) المناسبة، وتحسين استعلامات SQL.
    *   **التخزين المؤقت (Caching):** استخدام آليات التخزين المؤقت للبيانات التي لا تتغير كثيرًا (مثل بيانات خطوط المكاري الثابتة) لتقليل الحمل على قاعدة البيانات وتحسين سرعة الاستجابة.
    *   **الضغط (Compression):** ضغط بيانات JSON المرسلة عبر الشبكة لتقليل حجم البيانات وتحسين سرعة التحميل.
    *   **التحميل الكسول (Lazy Loading):** تحميل الموارد (مثل بلاطات الخرائط أو بيانات المسارات التفصيلية) فقط عند الحاجة إليها.
    *   **تحسين أداء الواجهة الأمامية:** استخدام مكونات React Native محسّنة، وتقليل إعادة العرض غير الضرورية.

## 10. لوحة التحكم الحكومية (Dashboard)

ستكون لوحة التحكم الحكومية تطبيق ويب منفصل أو جزءًا من الواجهة الخلفية يتم الوصول إليه عبر متصفح الويب، ويوفر واجهة رسومية لعرض البيانات التحليلية وإدارة الشكاوى.

*   **التقنيات:** يمكن استخدام إطار عمل ويب مثل Flask (مع Jinja2) أو React/Vue.js كواجهة أمامية منفصلة تتصل بنفس الـ Backend API.
*   **الميزات:**
    *   **إحصائيات الاستخدام:** عرض أكثر الخطوط استخدامًا، أوقات الذروة.
    *   **تقارير الشكاوى:** تصفية، عرض، وتحديث حالة الشكاوى.
    *   **الخرائط الحرارية:** عرض خريطة حرارية لحركة الناس بناءً على بيانات الاستخدام المجمعة.
    *   **توصيات الخطوط:** عرض التوصيات لتوسيع أو تعديل الخطوط بناءً على تحليل البيانات (البحث عن وجهات غير مدعومة، تقييمات المستخدمين، الكثافة السكانية).
    *   **تصدير البيانات:** إمكانية تصدير التقارير بصيغ مختلفة (PDF, Excel).

---

